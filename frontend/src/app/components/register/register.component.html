<div class="container fade-in" *ngIf="!created">
  <div class="dashboard-card">
    <h2>Create New Account</h2>
    <form [formGroup]="registerForm" (ngSubmit)="onCreate()" class="transfer-form">
      <div class="form-group">
        <label for="fullName">Full Name</label>
        <input type="text" id="fullName" formControlName="fullName" class="form-control" placeholder="Full Name" />
        <div class="error-message" *ngIf="fullName?.invalid && (fullName?.dirty || fullName?.touched)">Name is required</div>
      </div>
      <div class="form-group">
        <label for="dateOfBirth">Date of Birth</label>
        <mat-form-field appearance="fill" class="full-width">
          <input matInput [matDatepicker]="picker" id="dateOfBirth" formControlName="dateOfBirth" placeholder="Choose a date" />
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
        <div class="error-message" *ngIf="dateOfBirth?.invalid && (dateOfBirth?.dirty || dateOfBirth?.touched)">Date of Birth is required</div>
      </div>
      <div class="form-group">
        <label for="nationality">Nationality</label>
        <select id="nationality" formControlName="nationality" class="form-control">
          <option value="India">India</option>
        </select>
      </div>
      <div class="form-group">
        <label for="phoneNumber">Phone Number</label>
        <input type="text" id="phoneNumber" formControlName="phoneNumber" class="form-control" placeholder="+91-1234567890" />
        <div class="error-message" *ngIf="phoneNumber?.invalid && (phoneNumber?.dirty || phoneNumber?.touched)">Enter a valid 10-digit phone number</div>
      </div>
      <div class="form-group">
        <label for="permanentAddress">Permanent Address</label>
        <textarea id="permanentAddress" formControlName="permanentAddress" class="form-control" placeholder="Permanent Address"></textarea>
        <div class="error-message" *ngIf="permanentAddress?.invalid && (permanentAddress?.dirty || permanentAddress?.touched)">Address is required (min 10 characters)</div>
      </div>
      <div class="form-group">
        <label for="governmentIssuedID">Government ID</label>
        <select id="governmentIssuedID" formControlName="governmentIssuedID" class="form-control">
          <option value="">Select ID</option>
          <option value="Adhar Card Number">Aadhar Card</option>
          <option value="Pan Card Number">PAN Card</option>
          <option value="Passport Number">Passport</option>
        </select>
        <div class="error-message" *ngIf="governmentIssuedID?.invalid && (governmentIssuedID?.dirty || governmentIssuedID?.touched)">Please select a Government ID</div>
      </div>
      <div class="form-group">
        <label for="idNumber">ID Number</label>
        <input type="text" id="idNumber" formControlName="idNumber" class="form-control" placeholder="ID Number" />
        <div class="error-message" *ngIf="idNumber?.invalid && (idNumber?.dirty || idNumber?.touched)">ID Number is required (min 6 characters)</div>
      </div>
      <div class="form-group">
        <label for="accountType">Account Type</label>
        <select id="accountType" formControlName="accountType" class="form-control">
          <option value="SAVINGS">SAVINGS</option>
          <option value="CURRENT">CURRENT</option>
        </select>
        <div class="error-message" *ngIf="accountType?.invalid && (accountType?.dirty || accountType?.touched)">Please select an account type</div>
      </div>
      <div class="form-group">
        <label for="initialDeposit">Initial Deposit (₹)</label>
        <input type="number" id="initialDeposit" formControlName="initialDeposit" class="form-control" />
        <div class="error-message" *ngIf="initialDeposit?.invalid && (initialDeposit?.dirty || initialDeposit?.touched)">Minimum deposit is ₹500</div>
      </div>
      <div class="form-actions">
        <button type="submit" class="btn btn-primary" [disabled]="registerForm.invalid">Create Account</button>
      </div>
    </form>
  </div>
</div>

<div class="container fade-in" *ngIf="created">
  <div class="dashboard-card account-success-card glass-effect">
    <div class="success-icon">
      <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="#43b96f" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M9 12l2 2l4-4"/></svg>
    </div>
    <h2 class="success-title">Successfully Created Account</h2>
    <div class="success-details">
      <div><b>Account Number:</b> <span class="highlight">{{ backendResponse?.accountDetails?.accountNumber }}</span></div>
      <div><b>Name:</b> {{ backendResponse?.accountDetails?.accountHolderName }}</div>
      <div><b>Account Created:</b> {{ backendResponse?.accountDetails?.accountCreationDate | date:'yyyy-MM-dd' }}</div>
      <div><b>Phone:</b> {{ backendResponse?.accountDetails?.phoneNumber }}</div>
      <div><b>Account Type:</b> {{ backendResponse?.accountDetails?.accountType }}</div>
      <div><b>Balance:</b> <span class="highlight">₹{{ backendResponse?.accountDetails?.balance }}</span></div>
      <div><b>Permanent Address:</b> {{ backendResponse?.accountDetails?.permanentAddress }}</div>
      <div><b>Government ID:</b> {{ backendResponse?.accountDetails?.governmentIssuedID }}</div>
      <div><b>ID Number:</b> {{ backendResponse?.accountDetails?.idNumber }}</div>
      <div><b>Generated Password:</b> <span class="generated-password">{{ backendResponse?.generatedPassword }}</span></div>
      <div class="success-message">{{ backendResponse?.message }}</div>
    </div>
    <button class="btn btn-primary" (click)="goToLogin()">Back to Login Page</button>
  </div>
</div>
  